\section{N:/Documents/RTOS - CSC460/Assignments/Assignment2/Assignment2C/uart/uart.h File Reference}
\label{uart_2uart_8h}\index{N:/Documents/RTOS - CSC460/Assignments/Assignment2/Assignment2C/uart/uart.h@{N:/Documents/RTOS - CSC460/Assignments/Assignment2/Assignment2C/uart/uart.h}}
{\tt \#include $<$avr/interrupt.h$>$}\par
{\tt \#include \char`\"{}../common.h\char`\"{}}\par
\subsection*{Defines}
\begin{CompactItemize}
\item 
\#define {\bf F\_\-CPU}~8000000UL
\item 
\#define {\bf BAUD}~38400
\item 
\#define {\bf UART\_\-TX\_\-BUF\_\-MASK}~255
\item 
\#define {\bf UCSR1A\_\-CFG}~(\_\-BV(U2X1))
\item 
\#define {\bf UCSR1B\_\-CFG}~( \_\-BV(TXEN1))
\item 
\#define {\bf UCSR1C\_\-CFG}~(\_\-BV(UCSZ11) $|$ \_\-BV(UCSZ10))
\item 
\#define {\bf UBRR1\_\-CFG}
\item 
\#define {\bf UBRR1H\_\-CFG}~(UBRR1\_\-CFG $>$$>$ 8)
\item 
\#define {\bf UBRR1L\_\-CFG}~(UBRR1\_\-CFG \& 0x\-FF)
\item 
\#define {\bf TXInt\-Enable}()~UCSR1B $|$= \_\-BV(UDRIE1)
\item 
\#define {\bf TXInt\-Disable}()~UCSR1B \&= $\sim$(\_\-BV(UDRIE1))
\item 
\#define {\bf Is\_\-TXInt\-Disabled}()~(!(UCSR1B \& \_\-BV(UDRIE1)))
\end{CompactItemize}
\subsection*{Functions}
\begin{CompactItemize}
\item 
void {\bf uart\_\-init} (void)
\item 
int {\bf uart\_\-write} (uint8\_\-t $\ast$const str, int len)
\end{CompactItemize}


\subsection{Define Documentation}
\index{uart/uart.h@{uart/uart.h}!BAUD@{BAUD}}
\index{BAUD@{BAUD}!uart/uart.h@{uart/uart.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}\#define BAUD~38400}\label{uart_2uart_8h_62634036639f88eece6fbf226b45f84b}


\index{uart/uart.h@{uart/uart.h}!F_CPU@{F\_\-CPU}}
\index{F_CPU@{F\_\-CPU}!uart/uart.h@{uart/uart.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}\#define F\_\-CPU~8000000UL}\label{uart_2uart_8h_43bafb28b29491ec7f871319b5a3b2f8}


\index{uart/uart.h@{uart/uart.h}!Is_TXIntDisabled@{Is\_\-TXIntDisabled}}
\index{Is_TXIntDisabled@{Is\_\-TXIntDisabled}!uart/uart.h@{uart/uart.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}\#define Is\_\-TXInt\-Disabled()~(!(UCSR1B \& \_\-BV(UDRIE1)))}\label{uart_2uart_8h_348e9f2b25bd8dc2aea661d429df9764}


\index{uart/uart.h@{uart/uart.h}!TXIntDisable@{TXIntDisable}}
\index{TXIntDisable@{TXIntDisable}!uart/uart.h@{uart/uart.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}\#define TXInt\-Disable()~UCSR1B \&= $\sim$(\_\-BV(UDRIE1))}\label{uart_2uart_8h_9a4e4279fb85b209725d9b8722ef603e}


\index{uart/uart.h@{uart/uart.h}!TXIntEnable@{TXIntEnable}}
\index{TXIntEnable@{TXIntEnable}!uart/uart.h@{uart/uart.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}\#define TXInt\-Enable()~UCSR1B $|$= \_\-BV(UDRIE1)}\label{uart_2uart_8h_01b1775535c56b1f66414bbce45de538}


\index{uart/uart.h@{uart/uart.h}!UART_TX_BUF_MASK@{UART\_\-TX\_\-BUF\_\-MASK}}
\index{UART_TX_BUF_MASK@{UART\_\-TX\_\-BUF\_\-MASK}!uart/uart.h@{uart/uart.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}\#define UART\_\-TX\_\-BUF\_\-MASK~255}\label{uart_2uart_8h_8ab1de191a75a6994bd6ea49d918447c}


\index{uart/uart.h@{uart/uart.h}!UBRR1_CFG@{UBRR1\_\-CFG}}
\index{UBRR1_CFG@{UBRR1\_\-CFG}!uart/uart.h@{uart/uart.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}\#define UBRR1\_\-CFG}\label{uart_2uart_8h_1359d5f98ddf6cb499da9658150f3d2c}


{\bf Value:}

\footnotesize\begin{verbatim}(((    \
    F_CPU * (((UCSR1A_CFG & _BV(U2X1)) >> U2X1) + 1)    \
    / 8 / BAUD    \
) - 1) / 2)
\end{verbatim}\normalsize 
UBn = f\_\-OSC $\ast$ (1 + value(U2Xn)) / (16 $\ast$ BAUD) - 1 in floating point arithmetic. \index{uart/uart.h@{uart/uart.h}!UBRR1H_CFG@{UBRR1H\_\-CFG}}
\index{UBRR1H_CFG@{UBRR1H\_\-CFG}!uart/uart.h@{uart/uart.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}\#define UBRR1H\_\-CFG~(UBRR1\_\-CFG $>$$>$ 8)}\label{uart_2uart_8h_7bd0bece87c7b1ca30ec2c1013896c29}


\index{uart/uart.h@{uart/uart.h}!UBRR1L_CFG@{UBRR1L\_\-CFG}}
\index{UBRR1L_CFG@{UBRR1L\_\-CFG}!uart/uart.h@{uart/uart.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}\#define UBRR1L\_\-CFG~(UBRR1\_\-CFG \& 0x\-FF)}\label{uart_2uart_8h_fab53c051cfea543f1d9a31203b84f8e}


\index{uart/uart.h@{uart/uart.h}!UCSR1A_CFG@{UCSR1A\_\-CFG}}
\index{UCSR1A_CFG@{UCSR1A\_\-CFG}!uart/uart.h@{uart/uart.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}\#define UCSR1A\_\-CFG~(\_\-BV(U2X1))}\label{uart_2uart_8h_4221559fd15cee34bfa3bb6a5a8256bc}


\index{uart/uart.h@{uart/uart.h}!UCSR1B_CFG@{UCSR1B\_\-CFG}}
\index{UCSR1B_CFG@{UCSR1B\_\-CFG}!uart/uart.h@{uart/uart.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}\#define UCSR1B\_\-CFG~( \_\-BV(TXEN1))}\label{uart_2uart_8h_245745fb819d18a2a304fff4e9449e33}


\index{uart/uart.h@{uart/uart.h}!UCSR1C_CFG@{UCSR1C\_\-CFG}}
\index{UCSR1C_CFG@{UCSR1C\_\-CFG}!uart/uart.h@{uart/uart.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}\#define UCSR1C\_\-CFG~(\_\-BV(UCSZ11) $|$ \_\-BV(UCSZ10))}\label{uart_2uart_8h_79a1da1a63ad2dd6526d40febedfec8f}




\subsection{Function Documentation}
\index{uart/uart.h@{uart/uart.h}!uart_init@{uart\_\-init}}
\index{uart_init@{uart\_\-init}!uart/uart.h@{uart/uart.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void uart\_\-init (void)}\label{uart_2uart_8h_0c0ca72359ddf28dcd15900dfba19343}


Initialize UART \index{uart/uart.h@{uart/uart.h}!uart_write@{uart\_\-write}}
\index{uart_write@{uart\_\-write}!uart/uart.h@{uart/uart.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int uart\_\-write (uint8\_\-t $\ast$const  {\em str}, int {\em len})}\label{uart_2uart_8h_2f98501ce8efc928a596b54a157cc3f0}


Copies a string into a buffer for the Uart interrupt handler to write to the terminal. If overflow occurs, older data is overwritten.

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em str}]The string you want to send to the UART hyperterminal. \item[{\em len}]length of the string\end{description}
\end{Desc}
\begin{Desc}
\item[Returns:]-1 if overflow occurred. \end{Desc}
