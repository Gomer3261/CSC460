\section{N:/Documents/RTOS - CSC460/Assignments/Assignment2/Assignment2C/ass2\_\-communicate.c File Reference}
\label{ass2__communicate_8c}\index{N:/Documents/RTOS - CSC460/Assignments/Assignment2/Assignment2C/ass2_communicate.c@{N:/Documents/RTOS - CSC460/Assignments/Assignment2/Assignment2C/ass2\_\-communicate.c}}
{\tt \#include \char`\"{}Ass2\_\-globals.h\char`\"{}}\par
{\tt \#include $<$avr/interrupt.h$>$}\par
{\tt \#include \char`\"{}radio/radio.h\char`\"{}}\par
{\tt \#include \char`\"{}sonar/sonar.h\char`\"{}}\par
{\tt \#include \char`\"{}Communication\-Stats.h\char`\"{}}\par
{\tt \#include \char`\"{}uart.h\char`\"{}}\par
{\tt \#include \char`\"{}OS/Mikes\-Profiler.h\char`\"{}}\par
\subsection*{Defines}
\begin{CompactItemize}
\item 
\#define {\bf PINGRETRYCOUNT}~0
\end{CompactItemize}
\subsection*{Functions}
\begin{CompactItemize}
\item 
void {\bf Reset\-Message\-Clock} ()
\item 
uint16\_\-t {\bf Get\-Message\-Clock} ()
\item 
void {\bf Initialize\-Communication} (uint8\_\-t sa[5], uint8\_\-t ra[5])
\item 
void {\bf Communication\-Send\-Trigger\-Message} ()
\item 
int {\bf Communication\-PINGTimeout} ()
\item 
void {\bf Communication\-Ping\-Reset\-Retry\-Count} ()
\item 
int {\bf Communication\-Ping\-Update\-Retry\-Count} ()
\item 
int {\bf Communcation\-Received\-PING} ()
\item 
int {\bf Communication\-Received\-Sonar\-Response} ()
\item 
void {\bf Communication\-Get\-Response\-Statistics} ({\bf Communication\-Stat\-Struct} $\ast$Comm\-Stat)
\item 
void {\bf Communication\-Report\-Distance} ({\bf Communication\-Stat\-Struct} $\ast$Comm\-Stat)
\item 
void {\bf radio\_\-rxhandler} (uint8\_\-t pipenumber)
\end{CompactItemize}
\subsection*{Variables}
\begin{CompactItemize}
\item 
volatile int {\bf Timeout\-Counter}
\item 
volatile uint8\_\-t {\bf PINGReceived\-Flag}
\item 
volatile uint8\_\-t {\bf SONARReceived\-Flag}
\item 
volatile {\bf radiopacket\_\-t} {\bf packet}
\item 
volatile {\bf Communication\-Stat\-Struct} {\bf Working\-Struct}
\item 
volatile uint8\_\-t {\bf station\_\-addr} [5]
\item 
volatile uint8\_\-t {\bf remote\_\-addr} [5]
\end{CompactItemize}


\subsection{Define Documentation}
\index{ass2_communicate.c@{ass2\_\-communicate.c}!PINGRETRYCOUNT@{PINGRETRYCOUNT}}
\index{PINGRETRYCOUNT@{PINGRETRYCOUNT}!ass2_communicate.c@{ass2\_\-communicate.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}\#define PINGRETRYCOUNT~0}\label{ass2__communicate_8c_a0cf638ea4067441e001667d37506647}




\subsection{Function Documentation}
\index{ass2_communicate.c@{ass2\_\-communicate.c}!CommuncationReceivedPING@{CommuncationReceivedPING}}
\index{CommuncationReceivedPING@{CommuncationReceivedPING}!ass2_communicate.c@{ass2\_\-communicate.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int Communcation\-Received\-PING ()}\label{ass2__communicate_8c_4916e5a292337cfaceb4f364683ca263}


\index{ass2_communicate.c@{ass2\_\-communicate.c}!CommunicationGetResponseStatistics@{CommunicationGetResponseStatistics}}
\index{CommunicationGetResponseStatistics@{CommunicationGetResponseStatistics}!ass2_communicate.c@{ass2\_\-communicate.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void Communication\-Get\-Response\-Statistics ({\bf Communication\-Stat\-Struct} $\ast$ {\em Comm\-Stat})}\label{ass2__communicate_8c_79affa3c6d77dc0e77b4e23a84caa80b}


\index{ass2_communicate.c@{ass2\_\-communicate.c}!CommunicationPingResetRetryCount@{CommunicationPingResetRetryCount}}
\index{CommunicationPingResetRetryCount@{CommunicationPingResetRetryCount}!ass2_communicate.c@{ass2\_\-communicate.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void Communication\-Ping\-Reset\-Retry\-Count ()}\label{ass2__communicate_8c_55b3b9de645f6133d6f2d6adc4cf6aee}


\index{ass2_communicate.c@{ass2\_\-communicate.c}!CommunicationPINGTimeout@{CommunicationPINGTimeout}}
\index{CommunicationPINGTimeout@{CommunicationPINGTimeout}!ass2_communicate.c@{ass2\_\-communicate.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int Communication\-PINGTimeout ()}\label{ass2__communicate_8c_330c69972233883d22899563a4d6ee3a}


Currently wait indefinately, todo: add a timeout \index{ass2_communicate.c@{ass2\_\-communicate.c}!CommunicationPingUpdateRetryCount@{CommunicationPingUpdateRetryCount}}
\index{CommunicationPingUpdateRetryCount@{CommunicationPingUpdateRetryCount}!ass2_communicate.c@{ass2\_\-communicate.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int Communication\-Ping\-Update\-Retry\-Count ()}\label{ass2__communicate_8c_4a52018ca8d8cd42b70bf7511cbeaf6b}


\index{ass2_communicate.c@{ass2\_\-communicate.c}!CommunicationReceivedSonarResponse@{CommunicationReceivedSonarResponse}}
\index{CommunicationReceivedSonarResponse@{CommunicationReceivedSonarResponse}!ass2_communicate.c@{ass2\_\-communicate.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int Communication\-Received\-Sonar\-Response ()}\label{ass2__communicate_8c_49dc642f1f5803d05962797daaaee0cf}


\index{ass2_communicate.c@{ass2\_\-communicate.c}!CommunicationReportDistance@{CommunicationReportDistance}}
\index{CommunicationReportDistance@{CommunicationReportDistance}!ass2_communicate.c@{ass2\_\-communicate.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void Communication\-Report\-Distance ({\bf Communication\-Stat\-Struct} $\ast$ {\em Comm\-Stat})}\label{ass2__communicate_8c_8e9d1aa3dc56ef7e77292806371cb66a}


\index{ass2_communicate.c@{ass2\_\-communicate.c}!CommunicationSendTriggerMessage@{CommunicationSendTriggerMessage}}
\index{CommunicationSendTriggerMessage@{CommunicationSendTriggerMessage}!ass2_communicate.c@{ass2\_\-communicate.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void Communication\-Send\-Trigger\-Message ()}\label{ass2__communicate_8c_592640964e2228e9fe01726d862f4a6c}


\index{ass2_communicate.c@{ass2\_\-communicate.c}!GetMessageClock@{GetMessageClock}}
\index{GetMessageClock@{GetMessageClock}!ass2_communicate.c@{ass2\_\-communicate.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}uint16\_\-t Get\-Message\-Clock ()}\label{ass2__communicate_8c_4a1555c72f01a302197424e9dd091675}


\index{ass2_communicate.c@{ass2\_\-communicate.c}!InitializeCommunication@{InitializeCommunication}}
\index{InitializeCommunication@{InitializeCommunication}!ass2_communicate.c@{ass2\_\-communicate.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void Initialize\-Communication (uint8\_\-t {\em sa}[5], uint8\_\-t {\em ra}[5])}\label{ass2__communicate_8c_9f84f6eb2bde94f57f92369d20460960}


\index{ass2_communicate.c@{ass2\_\-communicate.c}!radio_rxhandler@{radio\_\-rxhandler}}
\index{radio_rxhandler@{radio\_\-rxhandler}!ass2_communicate.c@{ass2\_\-communicate.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void radio\_\-rxhandler (uint8\_\-t {\em pipenumber})}\label{ass2__communicate_8c_13b3742bf3c052776d9061ea792c8456}


This function is a hook into the radio's ISR. It is called whenever the radio generates an RX\_\-DR (received data ready) interrupt. \index{ass2_communicate.c@{ass2\_\-communicate.c}!ResetMessageClock@{ResetMessageClock}}
\index{ResetMessageClock@{ResetMessageClock}!ass2_communicate.c@{ass2\_\-communicate.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void Reset\-Message\-Clock ()}\label{ass2__communicate_8c_443579ed277c532000fcce2a3553121b}




\subsection{Variable Documentation}
\index{ass2_communicate.c@{ass2\_\-communicate.c}!packet@{packet}}
\index{packet@{packet}!ass2_communicate.c@{ass2\_\-communicate.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}volatile {\bf radiopacket\_\-t} {\bf packet}}\label{ass2__communicate_8c_c2409df9cd46fb5d0020630f1bc866ec}


\index{ass2_communicate.c@{ass2\_\-communicate.c}!PINGReceivedFlag@{PINGReceivedFlag}}
\index{PINGReceivedFlag@{PINGReceivedFlag}!ass2_communicate.c@{ass2\_\-communicate.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}volatile uint8\_\-t {\bf PINGReceived\-Flag}}\label{ass2__communicate_8c_0eea86b353f13e3814fbbae53718fd05}


\index{ass2_communicate.c@{ass2\_\-communicate.c}!remote_addr@{remote\_\-addr}}
\index{remote_addr@{remote\_\-addr}!ass2_communicate.c@{ass2\_\-communicate.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}volatile uint8\_\-t {\bf remote\_\-addr}[5]}\label{ass2__communicate_8c_6f08fd34954673a7eb72dbcf5e4898a8}


\index{ass2_communicate.c@{ass2\_\-communicate.c}!SONARReceivedFlag@{SONARReceivedFlag}}
\index{SONARReceivedFlag@{SONARReceivedFlag}!ass2_communicate.c@{ass2\_\-communicate.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}volatile uint8\_\-t {\bf SONARReceived\-Flag}}\label{ass2__communicate_8c_0fd25e17a4b0c200b893590ee7c153f5}


\index{ass2_communicate.c@{ass2\_\-communicate.c}!station_addr@{station\_\-addr}}
\index{station_addr@{station\_\-addr}!ass2_communicate.c@{ass2\_\-communicate.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}volatile uint8\_\-t {\bf station\_\-addr}[5]}\label{ass2__communicate_8c_4ec14995e7b86ae135c90ef19f995b50}


\index{ass2_communicate.c@{ass2\_\-communicate.c}!TimeoutCounter@{TimeoutCounter}}
\index{TimeoutCounter@{TimeoutCounter}!ass2_communicate.c@{ass2\_\-communicate.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}volatile int {\bf Timeout\-Counter}}\label{ass2__communicate_8c_b3839d06b7ecae30d81f7ecf5cf1776f}


\index{ass2_communicate.c@{ass2\_\-communicate.c}!WorkingStruct@{WorkingStruct}}
\index{WorkingStruct@{WorkingStruct}!ass2_communicate.c@{ass2\_\-communicate.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}volatile {\bf Communication\-Stat\-Struct} {\bf Working\-Struct}}\label{ass2__communicate_8c_988d48f328d8438572c6d728286e439a}


