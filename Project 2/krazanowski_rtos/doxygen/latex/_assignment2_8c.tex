\section{N:/Documents/RTOS - CSC460/Assignments/Assignment2/Assignment2C/Assignment2.c File Reference}
\label{_assignment2_8c}\index{N:/Documents/RTOS - CSC460/Assignments/Assignment2/Assignment2C/Assignment2.c@{N:/Documents/RTOS - CSC460/Assignments/Assignment2/Assignment2C/Assignment2.c}}
{\tt \#include \char`\"{}common.h\char`\"{}}\par
{\tt \#include \char`\"{}OS/os.h\char`\"{}}\par
{\tt \#include \char`\"{}trace/trace.h\char`\"{}}\par
{\tt \#include \char`\"{}Assignment2.h\char`\"{}}\par
{\tt \#include \char`\"{}Ass2\_\-Globals.h\char`\"{}}\par
{\tt \#include \char`\"{}Ass2\_\-Servo.h\char`\"{}}\par
{\tt \#include \char`\"{}Ass2\_\-Statistics.h\char`\"{}}\par
{\tt \#include \char`\"{}Ass2\_\-Communicate.h\char`\"{}}\par
{\tt \#include \char`\"{}OS/Mikes\-Profiler.h\char`\"{}}\par
\subsection*{Defines}
\begin{CompactItemize}
\item 
\#define {\bf SIMPLESTATES}~0
\item 
\#define {\bf TASKPERIOD}~1
\item 
\#define {\bf PERIODSCALE}~2
\item 
\#define {\bf UART\_\-OUTPUT\_\-STATE}~0
\item 
\#define {\bf clock8MHz}()~CLKPR = \_\-BV(CLKPCE); CLKPR = 0x00;
\end{CompactItemize}
\subsection*{Functions}
\begin{CompactItemize}
\item 
void {\bf Ass2\_\-Task\_\-Initialization} ()
\item 
void {\bf Ass2\_\-Task\_\-Update\-Sweep} ()
\item 
void {\bf Ass2\_\-Task\_\-Send\-Request} ()
\item 
void {\bf Ass2\_\-Task\_\-Get\-PINGResponse} ()
\item 
void {\bf Ass2\_\-Task\_\-Get\-Sonar\-Response} ()
\item 
void {\bf Ass2\_\-Task\_\-Update\-Statistics} ()
\item 
void {\bf Ass2\_\-Task\_\-Calculate\-And\-Report} ()
\item 
int {\bf main} (void)
\begin{CompactList}\small\item\em main function provided by user application. The first task to run. \item\end{CompactList}\end{CompactItemize}
\subsection*{Variables}
\begin{CompactItemize}
\item 
const unsigned int {\bf PT} = 5
\item 
const unsigned char {\bf PPP} [$\,$]
\item 
volatile int {\bf Reporting\-Outcome} = 0
\item 
{\bf EVENT} $\ast$ {\bf print\_\-event}
\item 
unsigned char {\bf ASS\_\-UART\_\-BUFF} [ASS\_\-UART\_\-BUFF\_\-MAXLINE]
\item 
{\bf Servo\-Control\-Struct} {\bf Sonar\-Direction\-Servo}
\item 
{\bf Communication\-Stat\-Struct} {\bf Com\-Stats}
\item 
volatile int {\bf Seek\-State} = LOCALIZATIONSTATE\_\-Initialization
\item 
volatile int {\bf b\-PINGRecieved}
\item 
uint8\_\-t {\bf station\_\-addr} [5] = \{0x01, 0x17, 0x76, 0x97, 0x00 \}
\item 
uint8\_\-t {\bf remote\_\-addr} [5] = \{0x98, 0x76, 0x54, 0x32, 0x10\}
\item 
int {\bf Sweep\-Complete} = 0
\end{CompactItemize}


\subsection{Define Documentation}
\index{Assignment2.c@{Assignment2.c}!clock8MHz@{clock8MHz}}
\index{clock8MHz@{clock8MHz}!Assignment2.c@{Assignment2.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}\#define clock8MHz()~CLKPR = \_\-BV(CLKPCE); CLKPR = 0x00;}\label{_assignment2_8c_dee69809a753ed21d281078ec7563eba}


\index{Assignment2.c@{Assignment2.c}!PERIODSCALE@{PERIODSCALE}}
\index{PERIODSCALE@{PERIODSCALE}!Assignment2.c@{Assignment2.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}\#define PERIODSCALE~2}\label{_assignment2_8c_ad04667b64235b8be982767215f64c2d}


\index{Assignment2.c@{Assignment2.c}!SIMPLESTATES@{SIMPLESTATES}}
\index{SIMPLESTATES@{SIMPLESTATES}!Assignment2.c@{Assignment2.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}\#define SIMPLESTATES~0}\label{_assignment2_8c_f36dbf02f605e0e136671db70ea37037}


\index{Assignment2.c@{Assignment2.c}!TASKPERIOD@{TASKPERIOD}}
\index{TASKPERIOD@{TASKPERIOD}!Assignment2.c@{Assignment2.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}\#define TASKPERIOD~1}\label{_assignment2_8c_8083e91f7c37096cc28ee96d6638a263}


\index{Assignment2.c@{Assignment2.c}!UART_OUTPUT_STATE@{UART\_\-OUTPUT\_\-STATE}}
\index{UART_OUTPUT_STATE@{UART\_\-OUTPUT\_\-STATE}!Assignment2.c@{Assignment2.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}\#define UART\_\-OUTPUT\_\-STATE~0}\label{_assignment2_8c_32fc5dd0436e4cbc1958a09c5e5a1e05}




\subsection{Function Documentation}
\index{Assignment2.c@{Assignment2.c}!Ass2_Task_CalculateAndReport@{Ass2\_\-Task\_\-CalculateAndReport}}
\index{Ass2_Task_CalculateAndReport@{Ass2\_\-Task\_\-CalculateAndReport}!Assignment2.c@{Assignment2.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void Ass2\_\-Task\_\-Calculate\-And\-Report ()}\label{_assignment2_8c_5a5a7e55960bab0a9fdf3fe4335e78bd}


\index{Assignment2.c@{Assignment2.c}!Ass2_Task_GetPINGResponse@{Ass2\_\-Task\_\-GetPINGResponse}}
\index{Ass2_Task_GetPINGResponse@{Ass2\_\-Task\_\-GetPINGResponse}!Assignment2.c@{Assignment2.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void Ass2\_\-Task\_\-Get\-PINGResponse ()}\label{_assignment2_8c_e40c0579717fda7874881584e852d0e6}


\index{Assignment2.c@{Assignment2.c}!Ass2_Task_GetSonarResponse@{Ass2\_\-Task\_\-GetSonarResponse}}
\index{Ass2_Task_GetSonarResponse@{Ass2\_\-Task\_\-GetSonarResponse}!Assignment2.c@{Assignment2.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void Ass2\_\-Task\_\-Get\-Sonar\-Response ()}\label{_assignment2_8c_416e934e7e90f8a83e7e39df10a454d4}


\index{Assignment2.c@{Assignment2.c}!Ass2_Task_Initialization@{Ass2\_\-Task\_\-Initialization}}
\index{Ass2_Task_Initialization@{Ass2\_\-Task\_\-Initialization}!Assignment2.c@{Assignment2.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void Ass2\_\-Task\_\-Initialization ()}\label{_assignment2_8c_893f9b7b8bb82024bebfaa3ae27362dd}


\index{Assignment2.c@{Assignment2.c}!Ass2_Task_SendRequest@{Ass2\_\-Task\_\-SendRequest}}
\index{Ass2_Task_SendRequest@{Ass2\_\-Task\_\-SendRequest}!Assignment2.c@{Assignment2.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void Ass2\_\-Task\_\-Send\-Request ()}\label{_assignment2_8c_2099545648710ee2ed84d9b8097abed3}


\index{Assignment2.c@{Assignment2.c}!Ass2_Task_UpdateStatistics@{Ass2\_\-Task\_\-UpdateStatistics}}
\index{Ass2_Task_UpdateStatistics@{Ass2\_\-Task\_\-UpdateStatistics}!Assignment2.c@{Assignment2.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void Ass2\_\-Task\_\-Update\-Statistics ()}\label{_assignment2_8c_f78ed0ce7a5435ac8c6a90c082232933}


\index{Assignment2.c@{Assignment2.c}!Ass2_Task_UpdateSweep@{Ass2\_\-Task\_\-UpdateSweep}}
\index{Ass2_Task_UpdateSweep@{Ass2\_\-Task\_\-UpdateSweep}!Assignment2.c@{Assignment2.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void Ass2\_\-Task\_\-Update\-Sweep ()}\label{_assignment2_8c_2f64547acd4be18f0168dd80d537a3bb}


\index{Assignment2.c@{Assignment2.c}!main@{main}}
\index{main@{main}!Assignment2.c@{Assignment2.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int main (void)}\label{_assignment2_8c_840291bc02cba5474a4cb46a9b9566fe}


main function provided by user application. The first task to run. 



\subsection{Variable Documentation}
\index{Assignment2.c@{Assignment2.c}!ASS_UART_BUFF@{ASS\_\-UART\_\-BUFF}}
\index{ASS_UART_BUFF@{ASS\_\-UART\_\-BUFF}!Assignment2.c@{Assignment2.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}unsigned char {\bf ASS\_\-UART\_\-BUFF}[ASS\_\-UART\_\-BUFF\_\-MAXLINE]}\label{_assignment2_8c_c6f31453540d1a3f9ba3cc3b588ef77a}


\index{Assignment2.c@{Assignment2.c}!bPINGRecieved@{bPINGRecieved}}
\index{bPINGRecieved@{bPINGRecieved}!Assignment2.c@{Assignment2.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}volatile int {\bf b\-PINGRecieved}}\label{_assignment2_8c_5f54173643f4c2a1955da0235a791ae2}


\index{Assignment2.c@{Assignment2.c}!ComStats@{ComStats}}
\index{ComStats@{ComStats}!Assignment2.c@{Assignment2.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}{\bf Communication\-Stat\-Struct} {\bf Com\-Stats}}\label{_assignment2_8c_0c9905bfe875af4a8f6dd67858b1b0e0}


\index{Assignment2.c@{Assignment2.c}!PPP@{PPP}}
\index{PPP@{PPP}!Assignment2.c@{Assignment2.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}const unsigned char {\bf PPP}[$\,$]}\label{_assignment2_8c_9139cb65cf60e47afed151765972c100}


{\bf Initial value:}

\footnotesize\begin{verbatim} {LOCALIZATIONSTATE_UpdateSweep, 140*PERIODSCALE, 
                                                                LOCALIZATIONSTATE_SendRequest, 2*PERIODSCALE, 
                                                                LOCALIZATIONSTATE_GetPINGResponse, 6*PERIODSCALE, 
                                                                LOCALIZATIONSTATE_GetSonarResponse, 12*PERIODSCALE,
                                                                LOCALIZATIONSTATE_UpdateStatistics, 40*PERIODSCALE }
\end{verbatim}\normalsize 
PPP and PT defined in user application. \index{Assignment2.c@{Assignment2.c}!print_event@{print\_\-event}}
\index{print_event@{print\_\-event}!Assignment2.c@{Assignment2.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}{\bf EVENT}$\ast$ {\bf print\_\-event}}\label{_assignment2_8c_51abdaff62ed7e507e74802d6aaad2f0}


print event setup in the main test \index{Assignment2.c@{Assignment2.c}!PT@{PT}}
\index{PT@{PT}!Assignment2.c@{Assignment2.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}const unsigned int {\bf PT} = 5}\label{_assignment2_8c_6370d00b2f49ebb4a69edf643003ada2}


PPP and PT defined in user application. \index{Assignment2.c@{Assignment2.c}!remote_addr@{remote\_\-addr}}
\index{remote_addr@{remote\_\-addr}!Assignment2.c@{Assignment2.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}uint8\_\-t {\bf remote\_\-addr}[5] = \{0x98, 0x76, 0x54, 0x32, 0x10\}}\label{_assignment2_8c_9d7fc80f8ba5c0334cc9738d54356069}


\index{Assignment2.c@{Assignment2.c}!ReportingOutcome@{ReportingOutcome}}
\index{ReportingOutcome@{ReportingOutcome}!Assignment2.c@{Assignment2.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}volatile int {\bf Reporting\-Outcome} = 0}\label{_assignment2_8c_8c5cd9581fcbd7ce69feab7f3199d124}


\index{Assignment2.c@{Assignment2.c}!SeekState@{SeekState}}
\index{SeekState@{SeekState}!Assignment2.c@{Assignment2.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}volatile int {\bf Seek\-State} = LOCALIZATIONSTATE\_\-Initialization}\label{_assignment2_8c_268101ff787eaec02fa52be440ccc331}


\index{Assignment2.c@{Assignment2.c}!SonarDirectionServo@{SonarDirectionServo}}
\index{SonarDirectionServo@{SonarDirectionServo}!Assignment2.c@{Assignment2.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}{\bf Servo\-Control\-Struct} {\bf Sonar\-Direction\-Servo}}\label{_assignment2_8c_77057803568619262409f8dd64be8492}


\index{Assignment2.c@{Assignment2.c}!station_addr@{station\_\-addr}}
\index{station_addr@{station\_\-addr}!Assignment2.c@{Assignment2.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}uint8\_\-t {\bf station\_\-addr}[5] = \{0x01, 0x17, 0x76, 0x97, 0x00 \}}\label{_assignment2_8c_532f61a745adf58df9da8d4b401502cf}


\index{Assignment2.c@{Assignment2.c}!SweepComplete@{SweepComplete}}
\index{SweepComplete@{SweepComplete}!Assignment2.c@{Assignment2.c}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int {\bf Sweep\-Complete} = 0}\label{_assignment2_8c_6b6779b2847779ebbdd081ca65fb40f8}


